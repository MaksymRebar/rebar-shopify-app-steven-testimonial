{% assign avg_rating = block.settings.product.metafields.demo.avg_rating.value | round %}
{{"slick.css"| asset_url| stylesheet_tag}}
{{"slick-theme.css"| asset_url| stylesheet_tag}}
{{"style.css"| asset_url| stylesheet_tag}}
<script src="https://google-review-app--development.gadget.app/api/client/web.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" type="text/javascript"></script>
<script src="https://code.jquery.com/jquery-migrate-3.4.0.min.js"></script>
{{"slick.js"| asset_url|  script_tag}}
<section>
<h2 style="text-align:center;" >Our Customers</h2>
<div id="review-container" class="regular slider">
</div>
</section>
<script src="https://static.elfsight.com/platform/platform.js" data-use-service-core defer></script>
<div class="elfsight-app-9b7f4c30-c93a-4fbe-af19-b3f93a827e79" data-elfsight-app-lazy></div>

<script>
  window.api = new Gadget({
    environment: "Development",

  })
  
  api.Review.findMany()
  .then(response=>{
    console.log(response)
    if(!response.length) return;
    var reviewContainer=document.getElementById('review-container')
    response.map((oneReview,index)=>{
      reviewContainer.innerHTML+=`
        <div class="item slider-item" style="width:80%" >
          <div>
            <img class="review-avatar" src="${oneReview.profile_photo_url?oneReview.profile_photo_url:""}" alt="image" />
            <div class="review-info" style="align-items:center;" >
              <h4 >${oneReview.author_name&&oneReview.author_name}</h4>
              <p>${oneReview.data&&oneReview.data.relative_time_description}</p>
            </div>
            <div class="review-rating" >
              
                ${0<oneReview.rating?"★":"☆"}
                ${1<oneReview.rating?"★":"☆"}
                ${2<oneReview.rating?"★":"☆"}
                ${3<oneReview.rating?"★":"☆"}
                ${4<oneReview.rating?"★":"☆"}
            </div>
          </div>
          <p class="review-text" >${oneReview.text}</p>
        </div>
      `;
    });
    $(".vertical-center-4").slick({
        dots: true,
        vertical: true,
        centerMode: true,
        slidesToShow: 4,
        slidesToScroll: 2
      });
      $(".vertical-center-3").slick({
        dots: true,
        vertical: true,
        centerMode: true,
        slidesToShow: 3,
        slidesToScroll: 3
      });
      $(".vertical-center-2").slick({
        dots: true,
        vertical: true,
        centerMode: true,
        slidesToShow: 2,
        slidesToScroll: 2
      });
      $(".vertical-center").slick({
        dots: true,
        vertical: true,
        centerMode: true,
      });
      $(".vertical").slick({
        dots: true,
        vertical: true,
        slidesToShow: 3,
        slidesToScroll: 3
      });
      $(".regular").slick({
        dots: true,
        infinite: true,
        slidesToShow: 3,
        slidesToScroll: 3
      });
      $(".center").slick({
        dots: true,
        infinite: true,
        centerMode: true,
        slidesToShow: 5,
        slidesToScroll: 3
      });
      $(".variable").slick({
        dots: true,
        infinite: true,
        variableWidth: true
      });
      $(".lazy").slick({
        lazyLoad: 'ondemand', // ondemand progressive anticipated
        infinite: true
      });
  });
  $(document).on('ready', function() {
      
    });
</script>
{% schema %}
{
  "name": "Google Map Review Widget",
  "target": "section",
  "settings": [
    { "type": "product", "id": "product", "label": "product", "autofill": true },
    { "type": "color", "id": "colour", "label": "Star Colour", "default": "#ff0000" }
  ]
}
{% endschema %}

